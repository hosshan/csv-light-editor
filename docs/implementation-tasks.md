# CSV Light Editor - 実装タスク一覧

## Phase 1: プロジェクト基盤構築（Week 1-2）

### Week 1: 環境構築とプロジェクト初期化

#### タスク1.1: Tauriプロジェクトのセットアップ
- [x] Rust環境のインストール確認
- [x] Tauri CLIのインストール（`cargo install tauri-cli`）
- [x] プロジェクト初期化（`npm create tauri-app@latest`）
- [x] React + TypeScriptテンプレート選択
- [x] プロジェクト構造の確認と調整

#### タスク1.2: 開発環境の構築
- [ ] VSCode拡張機能のインストール
  - [ ] rust-analyzer
  - [ ] Tauri
  - [ ] ESLint
  - [ ] Prettier
- [ ] デバッグ設定（.vscode/launch.json）
- [ ] Git hooks設定（husky + lint-staged）

#### タスク1.3: 依存関係の追加
- [x] Rustクレートの追加（Cargo.toml）
  ```toml
  csv = "1.3"
  tokio = { version = "1", features = ["full"] }
  serde = { version = "1.0", features = ["derive"] }
  serde_json = "1.0"
  rayon = "1.8"
  encoding_rs = "0.8"
  anyhow = "1.0"
  ```
- [x] Reactライブラリの追加（package.json）
  ```json
  "@tanstack/react-virtual": "latest",
  "@radix-ui/themes": "latest",
  "zustand": "latest",
  "@tauri-apps/api": "latest"
  ```

### Week 2: 基本アーキテクチャ実装

#### タスク1.4: Rustバックエンド構造
- [x] ディレクトリ構造の作成
  ```
  src-tauri/src/
  ├── commands/
  │   ├── mod.rs
  │   ├── file.rs
  │   └── csv.rs
  ├── csv_engine/
  │   ├── mod.rs
  │   ├── reader.rs
  │   ├── writer.rs
  │   └── streaming.rs
  ├── metadata/
  │   ├── mod.rs
  │   └── manager.rs
  └── utils/
      ├── mod.rs
      └── error.rs
  ```
- [x] エラーハンドリング構造の実装
- [x] ロギングシステムの設定

#### タスク1.5: Reactフロントエンド構造
- [x] ディレクトリ構造の作成
  ```
  src/
  ├── components/
  │   ├── Table/
  │   ├── Toolbar/
  │   └── Sidebar/
  ├── hooks/
  │   ├── useCSV.ts
  │   └── useTauri.ts
  ├── stores/
  │   └── csvStore.ts
  ├── services/
  │   └── api.ts
  └── types/
      └── index.ts
  ```
- [x] 基本的なレイアウトコンポーネント
- [x] Tauriとの通信レイヤー実装

#### タスク1.6: IPC通信の実装
- [x] Tauriコマンドの定義（Rust側）
- [x] フロントエンドAPIクライアント
- [x] エラーハンドリング
- [x] 型定義の共有

## Phase 2: コア機能実装（Week 3-4）

### Week 3: CSV処理エンジン

#### タスク2.1: CSV読み込み機能
- [x] ファイル選択ダイアログ
- [x] CSVパーサー実装（ストリーミング対応）
- [x] エンコーディング自動検出
- [x] 大容量ファイル対応（チャンク読み込み）
- [ ] プログレスバー表示

#### タスク2.2: CSV書き込み機能
- [x] 差分管理システム
- [x] 保存処理の実装
- [x] 上書き保存機能（Cmd+S）
- [x] 名前をつけて保存機能（Cmd+Shift+S）
- [x] 保存ダイアログの実装
- [x] ファイル形式の選択（CSV、TSV等）
- [x] エンコーディング選択
- [x] バックアップ機能
- [x] エンコーディング指定保存

#### タスク2.3: メタデータ管理
- [x] .csvmetaファイル形式の定義
- [x] メタデータの読み込み・保存
- [x] 列情報の永続化
- [ ] ビュー状態の保存

### Week 4: UIコンポーネント実装

#### タスク2.4: 仮想スクロールテーブル
- [x] TanStack Virtual統合
- [x] セルレンダリング最適化
- [x] 可変行高・列幅対応
- [x] スムーズスクロール実装

#### タスク2.5: セル編集機能
- [x] インライン編集
- [x] 編集モードの切り替え
- [x] 基本的なセル編集（テキスト入力、数値入力）
- [x] セル編集の確定（Enterキー、Tabキー）
- [x] セル編集のキャンセル（Escapeキー）
- [ ] バリデーション表示
- [x] キーボードナビゲーション

#### タスク2.6: 選択機能
- [x] 単一セル選択
- [ ] 範囲選択
- [ ] 行・列選択
- [ ] 全選択

#### タスク2.7: 基本編集操作
- [ ] コピー機能（Cmd+C）
- [ ] ペースト機能（Cmd+V）
- [ ] カット機能（Cmd+X）
- [ ] 全選択（Cmd+A）
- [ ] Undo機能（Cmd+Z）
- [ ] Redo機能（Cmd+Shift+Z）
- [ ] クリップボード形式の管理

#### タスク2.8: カラム操作機能（Phase 2: バックエンドAPI実装済み）
- [ ] 列の追加（指定位置） - バックエンドAPI実装済み、UI未実装
- [ ] 列の削除 - バックエンドAPI実装済み、UI未実装
- [ ] 列名の変更 - バックエンドAPI実装済み、UI未実装

#### タスク2.9: 行操作機能（Phase 2: バックエンドAPI実装済み）
- [ ] 行の追加（指定位置） - バックエンドAPI実装済み、UI未実装
- [ ] 行の削除 - バックエンドAPI実装済み、UI未実装
- [ ] 行の複製 - バックエンドAPI実装済み、UI未実装

#### タスク2.10: データ型検出と検証（Phase 2: バックエンドAPI実装済み）
- [ ] データ型自動検出（Integer, Float, Boolean, Date, DateTime, Email, URL, JSON, Text） - バックエンドAPI実装済み、UI未実装
- [ ] カラムごとのデータ型判定 - バックエンドAPI実装済み、UI未実装
- [ ] データ型に基づくバリデーション - バックエンドAPI実装済み、UI未実装
- [ ] エラーレポート生成 - バックエンドAPI実装済み、UI未実装

#### タスク2.11: 検索・置換機能（Phase 2: バックエンドAPI実装済み）
- [ ] テキスト検索 - バックエンドAPI実装済み、UI未実装
- [ ] 大文字小文字の区別オプション - バックエンドAPI実装済み、UI未実装
- [ ] 完全一致検索 - バックエンドAPI実装済み、UI未実装
- [ ] 正規表現サポート - バックエンドAPI実装済み、UI未実装
- [ ] 置換機能 - バックエンドAPI実装済み、UI未実装
- [ ] 置換プレビュー - バックエンドAPI実装済み、UI未実装
- [ ] カラム指定検索 - バックエンドAPI実装済み、UI未実装

#### タスク2.12: インポート/エクスポート設定（Phase 2: バックエンドAPI実装済み）
- [ ] 設定の永続化 - バックエンドAPI実装済み、UI未実装
- [ ] デフォルト設定管理 - バックエンドAPI実装済み、UI未実装
- [ ] エンコーディング設定 - バックエンドAPI実装済み、UI未実装
- [ ] デリミタ設定 - バックエンドAPI実装済み、UI未実装
- [ ] 日付/数値フォーマット設定 - バックエンドAPI実装済み、UI未実装
- [ ] バックアップ設定 - バックエンドAPI実装済み、UI未実装

## Phase 3: 編集機能実装（Week 5-6）

### Week 5: データ操作機能

#### タスク3.1: ソート機能
- [ ] 単一列ソート
- [ ] 複数列ソート
- [ ] カスタムソート条件
- [ ] ソート状態の永続化

#### タスク3.2: フィルタリング機能
- [ ] フィルターUI実装
- [ ] テキストフィルター
- [ ] 数値フィルター
- [ ] 日付フィルター
- [ ] 複合条件フィルター

#### タスク3.3: 検索・置換機能
- [ ] 検索ダイアログ
- [ ] 正規表現サポート
- [ ] 置換プレビュー
- [ ] 一括置換

### Week 6: 行列操作

#### タスク3.4: 行操作
- [ ] 行の追加（上/下）
- [ ] 行の削除
- [ ] 行の移動（ドラッグ＆ドロップ）
- [ ] 行の複製

#### タスク3.5: 列操作
- [ ] 列名の変更
- [ ] 列の追加（左/右）
- [ ] 列の削除
- [ ] 列の移動
- [ ] 列幅の調整
- [ ] 列の非表示/表示

#### タスク3.6: データ型と検証
- [ ] データ型自動判定
- [ ] カスタムフォーマット
- [ ] バリデーションルール
- [ ] エラー表示

#### タスク3.7: ファイル合成処理
- [ ] ファイルインポートでの行追加 : 同じデータ列の複数データを行に追加
- [ ] ファイルインポートでの列追加 : 行に別データをジョイン追加

## Phase 4: 計算機能実装（Week 7-8）

### Week 7: 統計計算エンジン

#### タスク4.1: 基本統計関数
- [ ] SUM, AVERAGE実装
- [ ] COUNT, MIN, MAX実装
- [ ] 列全体の計算
- [ ] 選択範囲の計算

#### タスク4.2: 高度な統計関数
- [ ] MEDIAN, MODE実装
- [ ] 標準偏差、分散
- [ ] パーセンタイル
- [ ] 相関係数

#### タスク4.3: 計算式パーサー
- [ ] 式の解析
- [ ] セル参照の解決
- [ ] 関数の実行
- [ ] エラーハンドリング

### Week 8: リアルタイム計算

#### タスク4.4: 計算式エディタ
- [ ] 式入力UI
- [ ] オートコンプリート
- [ ] 構文ハイライト
- [ ] エラー表示

#### タスク4.5: 依存関係管理
- [ ] セル依存グラフ
- [ ] 循環参照検出
- [ ] 再計算の最適化
- [ ] 計算順序の決定

#### タスク4.6: 行間計算
- [ ] 差分計算
- [ ] 累積値計算
- [ ] 移動平均
- [ ] 成長率計算

## Phase 5: エクスポート機能（Week 11）

### Week 11: 各種形式対応

#### タスク5.1: エクスポート基盤
- [ ] エクスポートダイアログ
- [ ] 形式選択UI
- [ ] オプション設定
- [ ] プレビュー機能

#### タスク5.2: 形式別実装
- [ ] Markdown table生成
- [ ] JSON変換（配列/オブジェクト）
- [ ] TSV変換
- [ ] Excel形式（オプション）

#### タスク5.3: エンコーディング処理
- [ ] UTF-8/Shift_JIS/EUC-JP対応
- [ ] BOM処理
- [ ] 改行コード変換
- [ ] 文字化け防止

#### タスク5.4: クリップボード連携
- [ ] コピー機能
- [ ] ペースト機能
- [ ] 形式選択
- [ ] スマートペースト

## Phase 6: AI機能実装（Week 9-10）

### Week 9: データクリーニング

#### タスク6.1: 異常値検出
- [ ] 統計的異常値検出
- [ ] パターンベース検出
- [ ] ハイライト表示
- [ ] 修正提案

#### タスク6.2: 重複処理
- [ ] 重複行検出
- [ ] 重複削除オプション
- [ ] マージ機能
- [ ] 重複レポート

#### タスク6.3: データ正規化
- [ ] 日付形式統一
- [ ] 数値形式統一
- [ ] 文字列正規化
- [ ] 空白処理

### Week 10: AI支援機能

#### タスク6.4: データ補完
- [ ] 欠損値検出
- [ ] 予測モデル実装
- [ ] 補完提案
- [ ] 確認UI

#### タスク6.5: 自然言語インターフェース
- [ ] クエリパーサー
- [ ] 意図理解
- [ ] 操作実行
- [ ] 結果表示

#### タスク6.6: ローカルAI統合
- [ ] モデル選択
- [ ] 推論エンジン統合
- [ ] リソース管理
- [ ] パフォーマンス最適化

## Phase 7: 最適化と配布（Week 12）

### Week 12: 最終調整

#### タスク7.1: パフォーマンス最適化
- [ ] レンダリング最適化
- [ ] メモリ使用量削減
- [ ] 起動時間短縮
- [ ] ベンチマークテスト

#### タスク7.2: UI/UX改善
- [ ] ダークモード対応
- [ ] キーボードショートカット
- [ ] ツールチップ追加
- [ ] アクセシビリティ対応

#### タスク7.3: ビルドと配布
- [ ] リリースビルド設定
- [ ] コード署名（オプション）
- [ ] .appバンドル作成
- [ ] DMGパッケージング

#### タスク7.4: ドキュメンテーション
- [ ] ユーザーマニュアル
- [ ] 開発者ドキュメント
- [ ] FAQ作成
- [ ] サンプルファイル準備

## テストタスク（継続的実施）

### 単体テスト
- [ ] Rustユニットテスト
- [ ] React コンポーネントテスト
- [ ] 統合テスト

### E2Eテスト
- [ ] 主要ユースケース
- [ ] エッジケース
- [ ] パフォーマンステスト

### 品質保証
- [ ] コードレビュー
- [ ] セキュリティ監査
- [ ] アクセシビリティテスト
- [ ] ユーザビリティテスト

## リリース基準チェックリスト

### MVP（Minimum Viable Product）基準
- [ ] CSVファイルの読み込み・保存
- [ ] 基本的なセル編集
- [ ] ソート・フィルタリング
- [ ] 10万行のスムーズな処理
- [ ] 安定したメモリ使用量

### 品質基準
- [ ] クラッシュ率 < 0.1%
- [ ] 起動時間 < 3秒
- [ ] メモリリーク検証済み
- [ ] 主要機能のテストカバレッジ > 80%

### ユーザビリティ基準
- [ ] 直感的な操作性
- [ ] レスポンシブなUI
- [ ] 適切なエラーメッセージ
- [ ] 基本的なドキュメント完備